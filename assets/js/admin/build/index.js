(()=>{"use strict";var e,t={750:(e,t,r)=>{const n=window.wp.element,a=window.React;var l=r.n(a);const o=window.wp.i18n,i=window.wp.components,c=window.wp.apiFetch;var u=r.n(c);function p(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function l(r,n,a,l){var c=n&&n.prototype instanceof i?n:i,u=Object.create(c.prototype);return d(u,"_invoke",function(r,n,a){var l,i,c,u=0,p=a||[],d=!1,s={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return l=t,i=0,c=e,s.n=r,o}};function m(r,n){for(i=r,c=n,t=0;!d&&u&&!a&&t<p.length;t++){var a,l=p[t],m=s.p,f=l[2];r>3?(a=f===n)&&(c=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=m&&((a=r<2&&m<l[1])?(i=0,s.v=n,s.n=l[1]):m<f&&(a=r<3||l[0]>n||n>f)&&(l[4]=r,l[5]=n,s.n=f,i=0))}if(a||r>1)return o;throw d=!0,n}return function(a,p,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===p&&m(p,f),i=p,c=f;(t=i<2?e:c)||!d;){l||(i?i<3?(i>1&&(s.n=-1),m(i,c)):s.n=c:s.v=c);try{if(u=2,l){if(i||(a="next"),t=l[a]){if(!(t=t.call(l,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);l=e}else if((t=(d=s.n<0)?c:r.call(n,s))!==o)break}catch(t){l=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(r,a,l),!0),u}var o={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(d(t={},n,function(){return this}),t),m=u.prototype=i.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,d(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return c.prototype=u,d(m,"constructor",u),d(u,"constructor",c),c.displayName="GeneratorFunction",d(u,a,"GeneratorFunction"),d(m),d(m,a,"Generator"),d(m,n,function(){return this}),d(m,"toString",function(){return"[object Generator]"}),(p=function(){return{w:l,m:f}})()}function d(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}d=function(e,t,r,n){function l(t,r){d(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(l("next",0),l("throw",1),l("return",2))},d(e,t,r,n)}function s(e,t,r,n,a,l,o){try{var i=e[l](o),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,i=[],c=!0,u=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=l.call(r)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const v=function(){var e,t,r,a,l=m((0,n.useState)(null),2),c=l[0],d=l[1],f=m((0,n.useState)(null),2),v=f[0],h=f[1],_=m((0,n.useState)(!0),2),y=_[0],w=_[1],E=m((0,n.useState)(null),2),R=E[0],b=E[1],g=(null===(e=window.rlmAdminData)||void 0===e?void 0:e.namespace)||"",O=(null===(t=window.rlmAdminData)||void 0===t?void 0:t.nonce)||"";return(0,n.useEffect)(function(){var e=function(){var e,t=(e=p().m(function e(){var t,r,n,a,l;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return w(!0),b(null),e.p=1,t="/".concat(g,"/dashboard-kpis"),r="/".concat(g,"/recent-requests?per_page=10"),e.n=2,u()({path:t,headers:{"X-WP-Nonce":O}});case 2:return n=e.v,d(n),e.n=3,u()({path:r,headers:{"X-WP-Nonce":O}});case 3:a=e.v,h(a),e.n=5;break;case 4:e.p=4,l=e.v,console.error("Error fetching RLM data:",l),b(l.message||(0,o.__)("Failed to load data. Check console for details.","wp-api-rate-limiter"));case 5:return e.p=5,w(!1),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var l=e.apply(t,r);function o(e){s(l,n,a,o,i,"next",e)}function i(e){s(l,n,a,o,i,"throw",e)}o(void 0)})});return function(){return t.apply(this,arguments)}}();g&&O?e():(b((0,o.__)("WordPress REST API root or nonce not available. Check plugin localization data.","wp-api-rate-limiter")),w(!1))},[g,O]),R?React.createElement(i.Notice,{status:"error",isDismissible:!1},R):y?React.createElement(i.Card,null,React.createElement(i.CardBody,null,React.createElement(i.Spinner,null),React.createElement("p",null,(0,o.__)("Loading dashboard data...","wp-api-rate-limiter")))):React.createElement("div",{className:"rlm-dashboard-wrapper"},React.createElement("h2",null,(0,o.__)("Overview","wp-api-rate-limiter")),React.createElement("div",{className:"rlm-kpis-grid"},React.createElement(i.Card,null,React.createElement(i.CardBody,null,React.createElement("h3",null,(0,o.__)("Total Requests Today","wp-api-rate-limiter")),React.createElement("p",{className:"rlm-kpi-value"},null!==(r=null==c?void 0:c.total_requests_today)&&void 0!==r?r:"N/A"))),React.createElement(i.Card,null,React.createElement(i.CardBody,null,React.createElement("h3",null,(0,o.__)("Blocked Requests Today","wp-api-rate-limiter")),React.createElement("p",{className:"rlm-kpi-value"},null!==(a=null==c?void 0:c.blocked_requests_today)&&void 0!==a?a:"N/A"))),React.createElement(i.Card,null,React.createElement(i.CardBody,null,React.createElement("h3",null,(0,o.__)("Blocked Rate","wp-api-rate-limiter")),React.createElement("p",{className:"rlm-kpi-value"},null!=c&&c.percentage_blocked?"".concat(c.percentage_blocked,"%"):"N/A")))),React.createElement("h2",null,(0,o.__)("Recent Requests","wp-api-rate-limiter")),React.createElement(i.Card,null,React.createElement(i.CardBody,null,v&&v.length>0?React.createElement("table",{className:"wp-list-table widefat fixed striped table-view-list"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,(0,o.__)("Time","wp-api-rate-limiter")),React.createElement("th",null,(0,o.__)("IP","wp-api-rate-limiter")),React.createElement("th",null,(0,o.__)("Endpoint","wp-api-rate-limiter")),React.createElement("th",null,(0,o.__)("User","wp-api-rate-limiter")),React.createElement("th",null,(0,o.__)("Status","wp-api-rate-limiter")),React.createElement("th",null,(0,o.__)("Blocked","wp-api-rate-limiter")))),React.createElement("tbody",null,v.map(function(e){return React.createElement("tr",{key:e.id},React.createElement("td",null,e.timestamp_readable),React.createElement("td",null,e.ip),React.createElement("td",null,e.endpoint),React.createElement("td",null,e.user?"".concat(e.user.login," (").concat(e.user.role,")"):(0,o.__)("Unauthenticated","wp-api-rate-limiter")),React.createElement("td",null,e.status_code),React.createElement("td",null,e.is_blocked?(0,o.__)("Yes","wp-api-rate-limiter"):(0,o.__)("No","wp-api-rate-limiter")))}))):React.createElement("p",null,(0,o.__)("No recent requests to display.","wp-api-rate-limiter")))),(null==c?void 0:c.top_ips_today)&&c.top_ips_today.length>0&&React.createElement(React.Fragment,null,React.createElement("h2",null,(0,o.__)("Top 5 Offending IPs Today","wp-api-rate-limiter")),React.createElement(i.Card,null,React.createElement(i.CardBody,null,React.createElement("ul",null,c.top_ips_today.map(function(e,t){return React.createElement("li",{key:t},e.ip,": ",e.count," ",(0,o.__)("requests","wp-api-rate-limiter"))}))))))};var h=document.getElementById("rlm-admin-app");h?(0,n.render)(l().createElement(v,null),h):console.error("WP API Rate Limiter: Mount point #rlm-admin-app not found.")}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var l=r[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=(t,r,a,l)=>{if(!r){var o=1/0;for(p=0;p<e.length;p++){for(var[r,a,l]=e[p],i=!0,c=0;c<r.length;c++)(!1&l||o>=l)&&Object.keys(n.O).every(e=>n.O[e](r[c]))?r.splice(c--,1):(i=!1,l<o&&(o=l));if(i){e.splice(p--,1);var u=a();void 0!==u&&(t=u)}}return t}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[r,a,l]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,l,[o,i,c]=r,u=0;if(o.some(t=>0!==e[t])){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(c)var p=c(n)}for(t&&t(r);u<o.length;u++)l=o[u],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(p)},r=globalThis.webpackChunkrlm_admin_dashboard=globalThis.webpackChunkrlm_admin_dashboard||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=n.O(void 0,[350],()=>n(750));a=n.O(a)})();